/* AeroGear JavaScript Library
* https://github.com/aerogear/aerogear-js
* JBoss, Home of Professional Open Source
* Copyright Red Hat, Inc., and individual contributors
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* http://www.apache.org/licenses/LICENSE-2.0
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
    A collection of data connections (stores) and their corresponding data models. This object provides a standard way to interact with client side data no matter the data format or storage mechanism used.
    @class
    @augments AeroGear.Core
    @param {String|Array|Object} [config] - A configuration for the store(s) being created along with the DataManager. If an object or array containing objects is used, the objects can have the following properties:
    @param {String} config.name - the name that the store will later be referenced by
    @param {String} [config.type="memory"] - the type of store as determined by the adapter used
    @param {String} [config.recordId="id"] - the identifier used to denote the unique id for each record in the data associated with this store
    @param {Object} [config.settings={}] - the settings to be passed to the adapter
    @returns {object} dataManager - The created DataManager containing any stores that may have been created
    @example
    // Create an empty DataManager
    var dm = AeroGear.DataManager();

    // Create a single store using the default adapter
    var dm2 = AeroGear.DataManager( "tasks" );

    // Create multiple stores using the default adapter
    var dm3 = AeroGear.DataManager( [ "tasks", "projects" ] );

    //Create a custom store
    var dm3 = AeroGear.DataManager({
        name: "mySessionStorage",
        type: "SessionLocal",
        id: "customID"
    });

    //Create multiple custom stores
    var dm4 = AeroGear.DataManager([
        {
            name: "mySessionStorage",
            type: "SessionLocal",
            id: "customID"
        },
        {
            name: "mySessionStorage2",
            type: "SessionLocal",
            id: "otherId",
            settings: { ... }
        }
    ]);
 */
AeroGear.DataManager = function( config ) {
    // Allow instantiation without using new
    if ( !( this instanceof AeroGear.DataManager ) ) {
        return new AeroGear.DataManager( config );
    }

    // Super Constructor
    AeroGear.Core.call( this );

    this.lib = "DataManager";
    this.type = config ? config.type || "Memory" : "Memory";

    /**
        The name used to reference the collection of data store instances created from the adapters
        @memberOf AeroGear.DataManager
        @type Object
        @default stores
     */
    this.collectionName = "stores";

    this.add( config );
};

AeroGear.DataManager.prototype = AeroGear.Core;
AeroGear.DataManager.constructor = AeroGear.DataManager;

/**
    The adapters object is provided so that adapters can be added to the AeroGear.DataManager namespace dynamically and still be accessible to the add method
    @augments AeroGear.DataManager
 */
AeroGear.DataManager.adapters = {};

// Constants
AeroGear.DataManager.STATUS_NEW = 1;
AeroGear.DataManager.STATUS_MODIFIED = 2;
AeroGear.DataManager.STATUS_REMOVED = 0;
